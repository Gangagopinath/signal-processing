\begin{enumerate}[label=\arabic*.,ref=\thesection.\theenumi]
\numberwithin{equation}{enumi}
\item Construct a Transmitter circuit.
\\
\solution:
\begin{figure}[H]
\centering
  \input{fm/tx/fig.tex}
  \caption{FM Transmitter Circuit diagram}
  \label{ckt:circuit_2}
\end{figure}
\item The modulated signal is given by 
\begin{align}
	s(t) = \cos\brak{2\pi f_c t + \phi(t)}
\end{align}
where
\begin{align}
	\phi(t) = 2\pi k_f \int_{0}^{t}m(\tau)\,d\tau
	\label{4.2.1.2}
\end{align}
List the various parameters in a table.
\\
\solution
Parameters are in the table \tabref{tab:tab_2}
\vspace{10mm}
\begin{table}[!ht]
  \centering
  \input{fm/tx/table.tex}
  \caption{Parameters of signal}
  \label{tab:tab_2}
\end{table}

\item Obtain a difference equation for computing $\phi(t)$.  Suggest a sampling rate.
\\
\solution 
\quad To obtain the difference equation for computing $\phi(t)$, we need to discretize the integral in the given equation. We can use the rectangular rule for numerical integration.\\ 
Let us divide the interval $[t_0, t]$ into $N$ equal subintervals of width $\Delta t = (t - t_0)/N$. Then, we can approximate $m(\tau)$ by its value at the midpoint of each subinterval, $\tau_n = t_0 + (n + 1/2)\Delta t$, where $n = 0, 1, 2, ..., N-1$. This gives:
\begin{align*}
m(\tau_n) \approx m(n\Delta t)
\end{align*}
we can approximate the integral in the equation \ref{4.2.1.2}
\\
\begin{align*}
\phi(t) \approx 2\pi kf_c \Delta t \sum_{n=0}^{N-1} m(n\Delta t)
\end{align*}
$\phi$ at the $n$th time step $t_n = t_0 + n\Delta t$. Then, we can write:
\begin{equation}
\label{n}
\phi_n = 2\pi kf_c \Delta t \sum_{k=0}^{n-1} m(k\Delta t) \\
\end{equation}
\begin{equation}
\label{n-1}
\phi_{n-1} = 2\pi kf_c \Delta t \sum_{k=0}^{n-2} m(k\Delta t)
\end{equation}
Subtracting the \ref{n-1} from \ref{n}, we get:
\begin{equation}
\phi_n - \phi_{n-1} = 2\pi k_f f_c \Delta t, m((n-1)\Delta t)
\end{equation}
\item Plot the spectrum of the transmitted signal.
\\
\solution
The folowing code plots the spectrum of transmitted signal in \figref{fig:Trans}
\\
Executing
\begin{lstlisting}
python3 fm/tx/codes/tx_spec.py
\end{lstlisting}
\begin{figure}{H}
\centering	
\includegraphics[width=\columnwidth]{fm/tx/figs/tx_spec.pdf} 
\caption{Plot of spectrum of transmitted signal.}
\label{fig:Trans}
\end{figure}
\item Compute and plot the PSD of the message signal using 
\eqref{eq:app-psd-def}.
\\
	\solution
Executing	
\begin{lstlisting}
python3 fm/tx/codes/tx_psd.py
\end{lstlisting}

\begin{figure}[H]
\centering
\includegraphics[width=\columnwidth]{fm/tx/figs/tx_psd.pdf}
\caption{Plot of PSD of the message signal.}
\label{fig:fm_PSD}
\end{figure}
\item Compute the bandwidth of the transmitted signal.
\\
\solution
Executing
\begin{lstlisting}
python3 fm/tx/codes/tx_bw.py
\end{lstlisting}
gives the bandwidth of the transmitted signal as 7190.69574 Hz
\\
The threshold of the transmitted signal from the plot is 1.2621 $\times 10^{10}$
\\
The maximum and minimum frequencies are 3595.34787 Hz and -3595.34787 respectively.
\\
Therefore bandwidth is\\
\begin{align}
\centering
f_{max}-f_{min} = 3595.34787-(-3595.34787) = 7190.69574 Hz
\end{align}
\iffalse
\begin{lstlisting}
/fm/FM/codes/mod.py
\end{lstlisting}
\fi
\end{enumerate}
